<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <title>BK MOVIE DASHBORD</title>
</head> 

<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Open+Sans:wght@700&family=Rubik+Iso&family=Shantell+Sans:ital,wght@1,300&display=swap');
 @import url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"); 
body{
    background-color: #010300;
    font-family: 'Dancing Script', cursive;
} 
.navbar {
    background-color: transparent;
}
#top ul{
    margin-left: 10%;
 }
#top ul li a {
    margin: 10px;
 } 
#top form ::-webkit-input-placeholder {
    color: rgb(247, 239, 239);
 } 
 .dropdown-menu li a{
    color: rgb(204, 18, 18);
 }
 .dropdown-menu li a:hover {
    color: #27fa13;
    border-left: 3px solid #27fa13;
 }
 #header_title{
    padding-top: 35px;
    color:rgb(90, 86, 86);
   
 }  
 #new{
    color:#27fa13;
 }
.card_cover {
    overflow: hidden;
    background-color: #f3f1fa;
} 
.movie_list{
    margin-top: 35px;
}

.cards{
    margin: 10px;
} 
.card{
    margin: 5.5px;
}  

.links{
    text-decoration: none;
    color: transparent;
} 
#topics li{
    margin: 100px;   
}  
#topics li a {
    text-decoration: none;
    color: white;
}  
#home {
    border-bottom: 2.5px solid #8ff884;
    padding-bottom: 10px;
} 

#new_release {
   
    border-bottom: 2.5px solid #27fa13;
    padding-bottom: 10px;
}

#home::after{
    color: rgb(248, 28, 28);
}
#topics li a:hover{
    color: #27fa13;
    border-bottom: 2.5px solid #262926;
    padding-bottom: 10px;
}  

.card_cover img:hover {
    transform: scale(1.1);
}  

.vote {
    border: 2px solid #29b474;
    border-radius: 50%; 
    color: rgb(224, 28, 28);
    text-align: center;
    font-size: 10px; 
    padding: 10px;
    width: fit-content;
    margin-top: 15px;
}
.rel_date {
    font-weight: 1000;
    color:white;
} 
/* .carousel-item img {
    width: 550px;
    height: auto;  
    vertical-align: middle;
} */
</style>


<body>
     <nav class="navbar navbar-expand-lg sticky-top ">
        <div class="container-fluid" id="top">
          <a class="navbar-brand" href="#">"
          
        </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-ui-radios-grid" style="color: #701707;"></i>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" style="color: #27fa13;" aria-current="page" id="home" href="#">Home</a>
              </li>
           
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Catalog
                </a>
                <ul class="dropdown-menu" style="background-color: transparent;" >
                  <li><a class="dropdown-item " 
                    style=" background-color: #9b5c5c;" href="#">Action</a></li>
                  <li><a class="dropdown-item "
                    style=" background-color: #9b5c5c;" href="#">Comedy</a></li>
                  <li><a class="dropdown-item "
                    style=" background-color: #9b5c5c;" href="#">Romance</a></li>
                  <li><a class="dropdown-item "
                    style=" background-color: #9b5c5c;" href="#">Drama</a></li>
                    
                </ul>
              </li> 
           
              <li class="nav-item dropdown ">
                <a class="nav-link text-white" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-three-dots"></i>
                </a>
                <ul class="dropdown-menu " style="background-color: #8464e4;">
                  <li><a class="dropdown-item " 
                    style=" background-color: #0a080f;" href="#">About</a></li>
                  <li><a class="dropdown-item " 
                    style=" background-color: #7c778b;" href="#">Profile</a></li>
                  <li><a class="dropdown-item " 
                    style=" background-color: #8272b3;" href="#">contacts</a></li>
                  <li><a class="dropdown-item " 
                    style=" background-color: #63558b;" href="#">privacy policy</a></li>
                </ul>
              </li> 
            </ul>
            <form class="d-flex search" role="search">
              <input class="form-control bg-dark  " style="border: 1px solid #272927; color: rgb(216, 192, 192);"
               type="search" placeholder="Search" id="inputMovie" aria-label="Search"> 
               <span class="input-group-append">
                <button class="btn btn-outline-warning  border-start-0 border rounded-pill ms-n3" type="button" id="bbb">
                    
                    

                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                  </svg>

                </button>    
            </span>  
            </form>
          </div>
        </div>
      </nav> 


      <div class="container-fluid"
       style="background-image: linear-gradient(rgba(0, 0, 0, 0.727),rgba(0, 0, 0, 0.7)) ,url('bkb.jpg'); height: 90vh; background-repeat: no-repeat;">
        <header>
            <h1 id="header_title">
                <span id="new"> Bk </span> 
                <span style="font-weight: 1000; " >Movies ! </span> 
            </h1>

            <br> <br> 
            <div id="carouselExample" >
               
                <div class="carousel-in" >
                  <div class=" active row" >
                    <div class="carousel-it col-lg-6">                     
                     
                    </div>
                     <p class="description text-white col-lg-4"> </p>
                    <div class="col-lg-2">
                        <button class="btn" type="button" style="color: #fa0612; font-size: 3rem;" id="carousel_next">
                            <button class="btn" type="button" style="font-size: 3rem;" id="carousel_next">
                            <i class="bi bi-arrow-bar-right"></i>
                         </button>
                    </div>
                    </div>
                </div> 

                
                
              </div>

            
        </header>  
      </div> 

      <div class="container-fluid" >
        <div class="header">
            <h3> Movie Category </h3>
                     <div class="container-fluid" >
                     <ul class=" " id="topics" style="display: flex;">
                        <li >
                       <span class="active"> 
                        <a href="#" style="color: #e9d5d6;" id="new_release">TV SERIES</a> </span>
                      </li>
                   
                      <li >
                        <a class="" id="trending" href="#"> Horror</a>
                      </li>
        
                      <li >
                        <a class="" id="genre" href="#">Action </a>
                      </li> 

                      <li >
                        <a class="" href="#"> CARTOONS </a>
                      </li>
                      <img class="" src="bkb5.jpg" alt="background-image"transparent width="1000px">
                  </div>
                  <h1 style="text-align: center; margin-top: 5%; color: rgb(252, 15, 15);">Now is the time <img class="" src="batman3.jpg" alt="error fetching image" width="800px" width="100"></h1> <br> <br>
                  <div class="cards row justify-content-center search_results">
                    
      
         </div> 

          <div class="movie_list">
          <div class="cards row justify-content-center tv-s">
          
                 

        </div> 

        </div>  

        <div class="searched_content"> 
            
            </div>
        </div>
      </div>
      </div>

    <script>

        const search_result = document.querySelector('.search_results')
        var btn = document.getElementById('bbb')
        async function get_movies_by_search(search_term) {
          //console.log(search_term)
                    const res = await fetch(`https://imdb-api.com/en/API/SearchSeries/k_h52f5864/${search_term}}`)
                    const resdata = await res.json() 

                    console.log(resdata)
                    return resdata.results
                }
        
                btn.addEventListener('click', add_searched_movie_to_dom)
        
            var rate_of_id = []
           

       async function get_rate_by_id(movie_obj){
        var movie_id = 0;
        for( var i=0; i<=movie_obj.length; i++){ //i<4 
          //console.log(movie_obj[i].id) 
          movie_id = movie_obj[i].id
          .then(res => res.json())
        
          //console.log(res.filmAffinity)
          //return res.filmAffinity;
          rate_of_id[i] = res.filmAffinity; 
          
        } }
        
        const inputword = document.querySelector('.search input')
            async function add_searched_movie_to_dom() {
                const data = await get_movies_by_search(inputword.value)
                 console.log(data)

                var rate  = await get_rate_by_id(data)
                var i = 0;

                search_result.innerHTML = data.map(fun => {
                    //console.log(fun)
                    return `
                    ${i++}
                    <div class="col-lg-4 col-sm-12 card" style="width: 12rem; background-color: #222028;" id="${fun.id}"> 
                        <span class="vote" > ${rate_of_id[i]}  </span> 
                        <div class="card_cover">
                             <br>
                            <img src="${fun.image}"  class="card-img-top" alt="sorry">
                            <div class="card-body">
                                <p style="color: white;">${fun.title} </p>
                                <span class="rel_date" > ${fun.description} </span>
                            </div>
                            </div>  
                        </div> 
                    `  
                    
                })
        }  
        const next_btn = document.getElementById('carousel_next');
        const carousel = document.querySelector(' .carousel-it');
        const carousel_des = document.querySelector(' .description')
        
         var nxt = 0;
        next_btn.addEventListener('click',get_movies)
        
        function get_movies(){
            fetch(`https://imdb-api.com/en/API/ComingSoon/k_12345678`)
            .then(res => res.json())
            .then(data => {
                console.log(data.items)
                carousel.innerHTML = `<img src="${data.items[nxt].image}" class="img-fluid d-block w-50 rounded" alt="error fetching image">`
                carousel_des.innerHTML ='Title  :  ' + data.items[nxt].title + '<br> <br>'+ 'genres : '+ data.items[nxt].genres + '<br> <br>' + 'Release state : ' + data.items[nxt].releaseState+ '<br> <br>' + 'Star List : ' + data.items[nxt].stars ; 
                ++nxt
            })
        }
        
        var trailer_of_id = []
        async function trailer_of_movies(tvarray){
            //console.log(tvarray)
            var tvid = 0
            for(var i=0; i<=4; i++){
                tvid = tvarray[i].id

          const trailer = await fetch(`https://imdb-api.com/en/API/FullCast/k_h52f5864/tt1375666`)
          .then( trailer => trailer.json())
          //console.log(trailer.linkEmbed)
          trailer_of_id[i] = trailer.linkEmbed;
            }
        }
        
        
        var num = 1;
        const cardimg = document.querySelector('.card_cover img')
        const cardbody = document.querySelector('.card-body a')
        
        
        const tvseries = document.querySelector(' .tv-s')
        var tvarray = 0;
        window.addEventListener('load', tv) 
        
        function tv(){
            var n = 0;
            fetch(`https://imdb-api.com/en/API/Top250Movies/k_h52f5864`)
            .then(res => res.json())
            .then(async data =>  {
                //console.log(data.items)
                tvarray = data.items;
                var tvarr = await trailer_of_movies(tvarray)
                //console.log(trailer_of_id)
                tvseries.innerHTML = tvarray.map( z => {
                    //console.log(trailer_of_id)
                   return `
                   <div class="col-lg-2 col-sm-6 card" style="width: 12rem; background-color: #222028;">
                    <span class="vote" > ${z.imDbRating}</span>     
                    <div class="card_cover">
                <img src="${z.image}" class="card-img-top" data-toggle="modal" data-target="#exampleModal" alt="...">
            <!-- Modal -->
        <div class="modal fade" id="exampleModal" role="dialog"  aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">TRAILER</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
               ${trailer_of_id[n]}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
            </div>
        </div>
        </div>
             <div class="card-body">
                <span style="color: white">${z.title} </span>
            </div>
            </div>
        </div> 
                    ${++n}
                    `  
                })
            })
        } 
            const tbtn = document.getElementById('trending');
            var trendarray = 0;
        
            tbtn.addEventListener('click', pop);
            
            function pop(){
                tbtn.setAttribute('class','active')
                tbtn.setAttribute('style','color: #f9ab00')
        
        
                fetch(`https://imdb-api.com/en/API/InTheaters/k_h52f5864`)
                .then(res => res.json())
                .then(data => {
                    //console.log(data.items)
                    //console.log(data.items.image)
                    trendarray = data.items
                    tvseries.innerHTML = trendarray.map( y => {
                        return `
                        <div class="col-lg-2 col-sm-6 card" style="width: 12rem; background-color: #222028;">
                            <span class="vote" > ${y.imDbRating}</span>
                        <div class="card_cover">
                        <img src="${y.image}" class="card-img-top" alt="...">
                        <div class="card-body">
                         <span style="color: white">${y.title} </span>
                         <span style="color: white">${y.genres} </span>
                        </div>
                        </div>
                        </div>
                     `
                    })
                })
            }
              </script>
        
        
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>        
        </body>
        </html> 
